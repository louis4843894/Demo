<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>社區客服系統 · 首頁</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0a443f" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- Material Web -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:FILL@0..1" rel="stylesheet" />
  <script type="module">import 'https://esm.run/@material/web/all.js';</script>

  <style>
    :root{ --container-w: min(1140px, calc(100vw - 24px)); }
    html,body{height:100%}
    body{margin:0;font-family: Roboto, system-ui, -apple-system, "Segoe UI", Arial;}
    md-top-app-bar{ position: sticky; top: 0; z-index: 110; }

    .app-shell{display:flex;flex-direction:column;min-height:100%}
    .container{width:var(--container-w);margin-inline:auto}

    .grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
    .tile{
      position:relative;border-radius:18px;overflow:hidden;min-height:200px;color:#fff;
      background-size:cover;background-position:center;cursor:pointer;
      box-shadow:0 8px 24px rgba(0,0,0,.12);transition:transform .15s, box-shadow .15s, filter .15s
    }
    .tile:hover{ transform:translateY(-2px); box-shadow:0 14px 36px rgba(0,0,0,.18); filter:saturate(1.05); }
    .tile::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.28))}
    .tile > .inner{position:relative;padding:22px;text-shadow:0 1px 2px rgba(0,0,0,.45)}
    .tile .kicker{opacity:.95;font-weight:600;line-height:1.9}
    .badge{position:absolute;top:10px;right:10px;background:#FFD54F;color:#2b2b2b;border-radius:999px;padding:6px 10px;font-weight:700;box-shadow:0 8px 24px rgba(0,0,0,.14)}
    .tile .title{font-size:22px;font-weight:900;letter-spacing:.3px;margin:4px 0 8px}
    .tile .items{line-height:1.9;font-weight:600;opacity:.95}

    #installCta{ position:fixed; right:16px; bottom: calc(env(safe-area-inset-bottom) + 132px); z-index:1200; display:none; }
    @media (max-width: 420px){ #installCta{ right:12px; bottom: calc(env(safe-area-inset-bottom) + 96px); } }

    .muted{opacity:.66}
  </style>
</head>
<body class="app-shell">
  <md-top-app-bar>
    <div slot="navigationIcon" style="padding-left:6px"><span class="material-symbols-outlined">apartment</span></div>
    <div slot="headline" style="font-weight:900;letter-spacing:.4px">社區客服系統</div>

    <md-menu id="userMenu" anchor="userBtn">
      <md-menu-item disabled>
        <div slot="headline" id="authName">訪客</div>
        <div slot="supporting-text" id="authMail" class="muted">未登入</div>
      </md-menu-item>
      <md-divider></md-divider>
      <md-menu-item onclick="gotoLogin()">
        <span slot="start" class="material-symbols-outlined">login</span>
        <div slot="headline">登入</div>
      </md-menu-item>
      <md-menu-item onclick="logout()">
        <span slot="start" class="material-symbols-outlined">logout</span>
        <div slot="headline">登出</div>
      </md-menu-item>
    </md-menu>
    <md-icon-button id="userBtn" slot="actionItems" aria-label="帳號" title="帳號" onclick="userMenu.show()">
      <span class="material-symbols-outlined">account_circle</span>
    </md-icon-button>

    <md-icon-button slot="actionItems" aria-label="後台" title="管理後台" onclick="location.href='backend.html'">
      <span class="material-symbols-outlined">admin_panel_settings</span>
    </md-icon-button>
  </md-top-app-bar>

  <main class="container" style="padding:22px 0 28px">
    <div style="margin:8px 0 18px">
      <h2 style="font-weight:900;letter-spacing:.3px;margin:0">快速入口</h2>
      <div class="muted" style="margin-top:6px">未登入可先瀏覽，進入功能頁會要求登入。</div>
    </div>

    <section class="grid">
      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1581090463728-28b1b3a4f50b?q=80&w=1400&auto=format&fit=crop')" href="app.html#announcement" onclick="return gotoProtected(event)">
        <div class="badge">公告 / 投票</div>
        <div class="inner">
          <div class="kicker">🗳️ 公告 / 投票</div>
          <div class="title">社區公告與投票</div>
          <div class="items">新增公告 · 編輯 · 刪除 · 投票結果</div>
        </div>
      </a>

      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1581092795360-fd1ca04f0952?q=80&w=1400&auto=format&fit=crop')" href="app.html#maintenance" onclick="return gotoProtected(event)">
        <div class="badge">維修 / 客服</div>
        <div class="inner">
          <div class="kicker">🛠️ 維修 / 客服</div>
          <div class="title">設備維護與客服單</div>
          <div class="items">新增維修 · 指派 · 進度 · 關單</div>
        </div>
      </a>

      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?q=80&w=1400&auto=format&fit=crop')" href="app.html#finance" onclick="return gotoProtected(event)">
        <div class="badge">帳務 / 收費</div>
        <div class="inner">
          <div class="kicker">💵 帳務 / 收費</div>
          <div class="title">管理費與收支</div>
          <div class="items">費用清單 · 催繳 · 匯出 · 發票</div>
        </div>
      </a>

      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?q=80&w=1400&auto=format&fit=crop')" href="app.html#resident" onclick="return gotoProtected(event)">
        <div class="badge">住戶 / 人員</div>
        <div class="inner">
          <div class="kicker">🏷️ 住戶 / 人員</div>
          <div class="title">住戶與社區人員</div>
          <div class="items">住戶名冊 · 主委 / 管理員</div>
        </div>
      </a>

      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1529078146-58e3c81d4ebc?q=80&w=1400&auto=format&fit=crop')" href="app.html#visitor" onclick="return gotoProtected(event)">
        <div class="badge">訪客 / 包裹</div>
        <div class="inner">
          <div class="kicker">📦 訪客 / 包裹</div>
          <div class="title">訪客與包裹</div>
          <div class="items">進出紀錄 · 包裹領取</div>
        </div>
      </a>

      <a class="tile" style="background-image:url('https://images.unsplash.com/photo-1511578314322-379afb476865?q=80&w=1400&auto=format&fit=crop')" href="app.html#meeting" onclick="return gotoProtected(event)">
        <div class="badge">會議 / 活動</div>
        <div class="inner">
          <div class="kicker">📝 會議 / 活動</div>
          <div class="title">議程與活動</div>
          <div class="items">會議紀錄 · 活動排程</div>
        </div>
      </a>
    </section>
  </main>

  <!-- 安裝 App FAB -->
  <md-fab id="installCta" label="安裝 App" variant="secondary">
    <span class="material-symbols-outlined" slot="icon">download</span>
  </md-fab>

  <script src="index.js"></script>
  <script>
    initPage('front'); // 更新使用者顯示、註冊 SW、安裝按鈕
  </script>
</body>
</html>
